!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(function(){return(()=>{var t={968:(t,e,n)=>{(()=>{const e={};function o(t,e={}){const n=document.createElement(t);return Object.keys(e).forEach((t=>{const o=e[t];"attributes"===t?n.setAttributes(o):"classList"===t?n.classList.add(...o):"content"===t?r(o,n):n[t]=o})),n}function r(t,e){t instanceof HTMLElement?e.appendChild(t):"function"==typeof t?r(t(),e):t instanceof Array?e.append(...t):t.content&&t.events?(function(t){if(!n.g.storage)throw new TypeError("CustomElements.handleStoreEvents: storage is not defined, this must be defined <global | window>.storage level");Object.keys(t).forEach((e=>{n.g.storage.on(e,t[e])}))}(t.events),r(t.content,e)):e.innerHTML+=t}function s(t,e){return Object.assign({},t,{content:e||""})}["H1","H2","H3","H4","H5","H6","Div","Span","Ol","Ul","Li","Table","Thead","Tbody","Tfoot","Tr","Td","Th","Form","Label","Input","TextArea","Button","Img","Picture","Source","Select","Option","P","A","Section","Video"].forEach((t=>{e[t]=function(e,n){return e=s(e,n),o(t.toLowerCase(),e)}})),t.exports=Object.assign({},{HTMLElementCreator:o,DefineElement:function(t,e){window.customElements.define(t,e),function(t){const e=function(t){return t.replace(/(-|\b[a-z](?!-))/g,(function(t){return"-"===t?"":t.toUpperCase()}))}(t);HTMLElement.prototype[e]=function(e,n){const r=s(e,n),i=o(t,r);return this.appendChild(i),i},window[e]=function(e,n){const r=s(e,n);return o(t,r)}}(t)}},e)})()},961:(t,e,n)=>{(()=>{const t=n(968);Object.keys(t).forEach((e=>{HTMLElement.prototype[e]=function(n,o){const r=t[e](n,o);return this.appendChild(r),r}})),HTMLElement.prototype.onStoreEvent=function(t,e,o=!1){const r=o||"storage";if(!n.g[r])throw new TypeError(`CustomElements.onStoreEvent: ${r} is not defined, this must be defined <global | window>.${r} level`);const s=()=>{this.baseNode()instanceof HTMLHtmlElement?e(n.g[r].getState(),this):n.g[r].removeListener(t,s)};return n.g[r].on(t,s),this},HTMLElement.prototype.baseNode=function(){return null===this.parentElement?this:this.parentElement.baseNode()},HTMLElement.prototype.setAttributes=function(t){return Object.keys(t).forEach((e=>{this.setAttribute(e,t[e])})),this}})()},568:(t,e,n)=>{const{MetaComponent:o}=n(308),{MetaContainer:r}=n(939),{MetaShadowComponent:s}=n(458),i=n(914),c=n(968);n(961),t.exports=Object.assign({},{MetaComponent:o,MetaContainer:r,MetaShadowComponent:s,Store:i},c)},511:t=>{class e extends window.HTMLElement{constructor(t=!1){super(),this.render?this.render=this.render.bind(this):this.ComponentDidFail(new TypeError("render method required on MetaComponents")),t&&(this.storage=t),this.addListeners&&(this.addListeners=this.addListeners.bind(this))}_appendContent(){try{const t=this.render();this.root?"string"==typeof t?this.root.innerHTML+=t:this.root.appendChild(t):"string"==typeof t?this.innerHTML+=t:this.appendChild(t)}catch(t){this.ComponentDidFail(t)}}_mapStoreEvents(){const t=this.handleStoreEvents();for(const e in t)t.hasOwnProperty(e)&&this.storage.on(e,t[e])}handleStoreEvents(){this.ComponentDidFail(new TypeError('MetaComponent.handleStoreEvents: This function expects to be overwritten by child object, otherwise do not pass "storage" object as argument to constructor.'))}ComponentDidFail(t){throw t}disconnectedCallback(){const t=this.storage?this.handleStoreEvents():{};for(const e in t)t.hasOwnProperty(e)&&this.storage.removeListener(e,t[e])}}t.exports={MetaBase:e}},308:(t,e,n)=>{const{MetaBase:o}=n(511);t.exports={MetaComponent:class extends o{constructor(t=!1){super(t)}connectedCallback(){this._appendContent(),this.addListeners&&this.addListeners(),this.storage&&this._mapStoreEvents()}}}},939:(t,e,n)=>{const{MetaBase:o}=n(511);t.exports={MetaContainer:class extends o{constructor(){if(super(),!this.render)throw new TypeError("render method is require for MetaContainers")}connectedCallback(){this._appendContent()}}}},458:(t,e,n)=>{const{MetaBase:o}=n(511);t.exports={MetaShadowComponent:class extends o{constructor(t=!1){super(t)}connectedCallback(){this.root=this.shadowRoot||this.attachShadow({mode:"open"}),this.root.innerHTML=`\n\t\t<style>\n\t\t\t${this.styles.map((t=>`\n\t\t\t@import url("${t}");\n\t\t\t`)).join("")}\n\t\t</style>\n\t\t`,this._appendContent(),this.addListeners&&this.addListeners(),this.storage&&this._mapStoreEvents()}}}},914:(t,e,n)=>{"use strict";const o=n(729);class r extends o{static clone(t,e,n){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);void 0===e&&(e=[],n=[]);let o,s=e.length;for(o=0;o<s;o++)if(t===e[o])return n[o];if("[object Array]"==Object.prototype.toString.call(t)){let o=t.slice();e.push(t),n.push(o);let s=o.length;for(;s--;)o[s]=r.clone(o[s],e,n);return o}let i=Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__;i||(i=t.constructor.prototype);let c=Object.create(i);e.push(t),n.push(c);for(let o in t)c[o]=r.clone(t[o],e,n);return c}constructor(t,e,...n){super();let o,s=e||{},i=r.clone(t)||{};const c=function(t){if(s[t.type]){let e=s[t.type](t,r.clone(i));e.newState&&(i=r.clone(e.newState)),this.emit(t.type,e,t)}else this.emit(t.type,t);t.cb&&"function"==typeof t.cb&&t.cb(i)};let a=function(t,e,n){return t?n?function(o){return next=n.bind(e,o),t}.bind(e):function(e){return next=c.bind(this,e),t}.bind(e):c.bind(this)};this.getState=function(){return r.clone(i)},this.getHandlers=function(){return s},this.addHandler=function(t,e){s[t]=e},this.dispatch=function(t){o(t)};let p=0;const h={getState:this.getState,dispatch:this.dispatch};do{a=a.bind(this),o=a(n[p],h,n[p+1])}while(++p<n.length)}}t.exports=r},729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function o(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||t,i),a=n?n+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],c]:t._events[a].push(c):(t._events[a]=c,t._eventsCount++),t}function i(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,o,r=[];if(0===this._eventsCount)return r;for(o in t=this._events)e.call(t,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e=n?n+t:t,o=this._events[e];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,s=o.length,i=new Array(s);r<s;r++)i[r]=o[r].fn;return i},c.prototype.listenerCount=function(t){var e=n?n+t:t,o=this._events[e];return o?o.fn?1:o.length:0},c.prototype.emit=function(t,e,o,r,s,i){var c=n?n+t:t;if(!this._events[c])return!1;var a,p,h=this._events[c],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,o),!0;case 4:return h.fn.call(h.context,e,o,r),!0;case 5:return h.fn.call(h.context,e,o,r,s),!0;case 6:return h.fn.call(h.context,e,o,r,s,i),!0}for(p=1,a=new Array(l-1);p<l;p++)a[p-1]=arguments[p];h.fn.apply(h.context,a)}else{var u,f=h.length;for(p=0;p<f;p++)switch(h[p].once&&this.removeListener(t,h[p].fn,void 0,!0),l){case 1:h[p].fn.call(h[p].context);break;case 2:h[p].fn.call(h[p].context,e);break;case 3:h[p].fn.call(h[p].context,e,o);break;case 4:h[p].fn.call(h[p].context,e,o,r);break;default:if(!a)for(u=1,a=new Array(l-1);u<l;u++)a[u-1]=arguments[u];h[p].fn.apply(h[p].context,a)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,o,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return i(this,s),this;var c=this._events[s];if(c.fn)c.fn!==e||r&&!c.once||o&&c.context!==o||i(this,s);else{for(var a=0,p=[],h=c.length;a<h;a++)(c[a].fn!==e||r&&!c[a].once||o&&c[a].context!==o)&&p.push(c[a]);p.length?this._events[s]=1===p.length?p[0]:p:i(this,s)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&i(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c}},e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n(568)})()}));
//# sourceMappingURL=metaflux.js.map